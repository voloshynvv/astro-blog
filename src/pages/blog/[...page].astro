---
import type { GetStaticPaths } from 'astro';
import { getCollection } from 'astro:content';
import { pluralize } from '@/utils/pluralize';

import BlogLayout from '@/layouts/BlogLayout.astro';
import Post from '@/components/Post.astro';

export const getStaticPaths = (async ({ paginate }) => {
  const posts = await getCollection('blog');

  return paginate(posts, { pageSize: 10 });
}) satisfies GetStaticPaths;

const { page } = Astro.props;
---

<BlogLayout>
  <p class="border-b border-t py-3 font-medium">{pluralize(page.total, 'post')} in total</p>

  {page.data.map((p) => <Post post={p} />)}

  <div class="flex">
    {page.url.prev ? <a href={page.url.prev}>Previous</a> : null}
    {page.url.next ? <a href={page.url.next}>Next</a> : null}
  </div>
</BlogLayout>
